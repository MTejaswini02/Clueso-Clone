<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="style.css">
</head>

<body>

<div class="sidebar">
    
    <div class="brand">
        <img src="clueso_logo.jfif" class="brand-logo">
        <span class="brand-text">Clueso</span>
    </div>

    <div class="menu">
        <a href="dashboard.html">ğŸ  Dashboard</a>
        <a href="submit_feedback.html" class="active">ğŸ“ Submit Feedback</a>
        <a href="view_feedback.html">ğŸ“‚ View Feedback</a>
        <a href="insights.html">ğŸ“Š Insights</a>
    </div>

    <div class="logout">
        <button onclick="logout()">Logout</button>
    </div>

</div>


<div class="container">
<h1>ğŸ“ Submit Feedback</h1>


<textarea id="msgBox" placeholder="Write your feedback here..."></textarea>
<br>
<button onclick="submitFeedback()">Submit</button>

<p id="status"></p>

<button class="back" onclick="location.href='dashboard.html'">â¬… Back to Dashboard</button>
</div>

<script>
function logout(){
 localStorage.clear();
 window.location.href="login.html";
}

async function submitFeedback(){
 const token = localStorage.getItem("token");

 const res = await fetch("http://127.0.0.1:8000/feedback/", {
  method:"POST",
  headers:{
   "Content-Type":"application/json",
   "Authorization":"Bearer " + token
  },
  body:JSON.stringify({
    message: document.getElementById("msgBox").value
  })
 });

 const data = await res.json();
 if(res.status === 200){
    document.getElementById("status").innerText="Feedback Submitted Successfully!";
 } else {
    document.getElementById("status").innerText=data.detail || "Failed";
 }
}
</script>

</body>
</html>
